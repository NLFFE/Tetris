!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);i(1),i(2);const r=20,n=10,o=30,s=30,c=1e3,u=13,l=32,d=37,a=39,p=40,h=65,f=68,y=82;let m=[[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,1,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,0,0,0],[0,0,1,1],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,0,1,1],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,1,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]]];function v(){return m[Math.floor(Math.random()*m.length)]}function g(){this.gameOver=!1,this.score=0,this.currentPiece=v(),this.nextPiece=v(),this.pieceY=0,this.pieceX=3,this.rows=[];for(let e=0;e<r;e++){this.rows[e]=[];for(let t=0;t<n;t++)this.rows[e][t]=0}}function P(e,t,i,o){for(let s=0;s<4;s++)for(let c=0;c<4;c++)if(t[s][c]&&(i+s>=r||o+c<0||o+c>=n||e[i+s][o+c]))return!0;return!1}function w(e,t,i,n){let o=[];for(let t=0;t<r;t++)o[t]=e[t].slice();for(let e=0;e<4;e++)for(let r=0;r<4;r++)t[e][r]&&(o[i+e][n+r]=1);return o}function L(e,t){let i=function(e,t){let i=e.get_score(),r=document.createElement("div");return r.classList.add("tetrisScore"),r.innerHTML=`<p>SCORE: ${i} </p>`,t&&(r.innerHTML+="<p>PAUSED</p>"),e.get_game_over()&&(r.innerHTML+="<p>GAME OVER</p>"),r}(e,t),r=function(e){let t=b(e.get_next_piece(),4,4),i=document.createElement("div");return i.classList.add("tetrisPreview"),i.appendChild(t),i}(e),n=function(){let e=document.createElement("div");return e.classList.add("tetrisUsage"),e.innerHTML="<table><tr><th>Cursor Keys</th><td>Steer</td></tr><tr><th>a/d</th><td>Rotate</td></tr><tr><th>Space bar</th><td>Let fall</td></tr><tr><th>Enter</th><td>Toggle pause</td></tr><tr><th>r</th><td>Restart game</td></tr></table>",e}(),o=document.createElement("div");return o.classList.add("tetrisLeftPane"),o.appendChild(r),o.appendChild(i),o.appendChild(n),o}function C(e){let t=function(e){let t=b(e.get_rows(),r,n);return t.classList.add("tetrisBoard"),t}(e),i=document.createElement("div");return i.classList.add("tetrisRightPane"),i.appendChild(t),i}function b(e,t,i){let r=document.createElement("div");for(let n=0;n<t;n++)for(let t=0;t<i;t++){let i=document.createElement("div");i.classList.add("tetrisBlock"),e[n][t]&&i.classList.add("habitated"),i.style.top=n*s+"px",i.style.left=t*o+"px",r.appendChild(i)}return r}function E(e,t,i){let r=function(e,t){let i=L(e,t),r=C(e),n=document.createElement("div");return n.classList.add("tetrisGame"),n.appendChild(i),n.appendChild(r),n}(e,t);i.innerHTML="",i.appendChild(r)}function _(e){let t=new g;!function i(){let r=setInterval((function(){t.tick()&&E(t,!1,e)}),c);e.addEventListener("keydown",(function n(o){if(console.log(o),o.shiftKey||o.altKey||o.metaKey)return;let s=!0,c=!1;o.keyCode===u?c=!0:o.keyCode===y?t=new g:o.keyCode===d?t.steerLeft():o.keyCode===a?t.steerRight():o.keyCode===p?t.steerDown():o.keyCode===h?t.rotateLeft():o.keyCode===f?t.rotateRight():o.keyCode===l?t.letFall():s=!1,s&&(o.preventDefault(),c?(e.removeEventListener("keydown",n),clearInterval(r),console.log("작동중"),e.addEventListener("keydown",(function t(r){r.keyCode==u&&(e.removeEventListener("keydown",t),i())})),E(t,!0,e)):E(t,!1,e))}))}()}g.prototype.get_score=function(){return this.score},g.prototype.get_game_over=function(){return this.gameOver},g.prototype.get_next_piece=function(){return this.nextPiece},g.prototype.get_rows=function(){return w(this.rows,this.currentPiece,this.pieceY,this.pieceX)},g.prototype.steerLeft=function(){P(this.rows,this.currentPiece,this.pieceY,this.pieceX-1)||(this.pieceX-=1)},g.prototype.steerRight=function(){P(this.rows,this.currentPiece,this.pieceY,this.pieceX+1)||(this.pieceX+=1)},g.prototype.steerDown=function(){P(this.rows,this.currentPiece,this.pieceY+1,this.pieceX)||(this.pieceY+=1)},g.prototype.rotateLeft=function(){let e=[[(t=this.currentPiece)[0][3],t[1][3],t[2][3],t[3][3]],[t[0][2],t[1][2],t[2][2],t[3][2]],[t[0][1],t[1][1],t[2][1],t[3][1]],[t[0][0],t[1][0],t[2][0],t[3][0]]];var t;P(this.rows,e,this.pieceY,this.pieceX)||(this.currentPiece=e)},g.prototype.rotateRight=function(){let e=[[(t=this.currentPiece)[3][0],t[2][0],t[1][0],t[0][0]],[t[3][1],t[2][1],t[1][1],t[0][1]],[t[3][2],t[2][2],t[1][2],t[0][2]],[t[3][3],t[2][3],t[1][3],t[0][3]]];var t;P(this.rows,e,this.pieceY,this.pieceX)||(this.currentPiece=e)},g.prototype.letFall=function(){for(;!P(this.rows,this.currentPiece,this.pieceY+1,this.pieceX);)this.pieceY+=1;this.tick()},g.prototype.tick=function(){return!this.gameOver&&(P(this.rows,this.currentPiece,this.pieceY+1,this.pieceX)?(this.rows=w(this.rows,this.currentPiece,this.pieceY,this.pieceX),P(this.rows,this.nextPiece,0,n/2-2)?(console.log("더이상 올라갈 수 없습니다.."),this.gameOver=!0):(console.log("블럭 체인지"),this.currentPiece=this.nextPiece,this.pieceY=0,this.pieceX=n/2-2,this.nextPiece=v())):this.pieceY+=1,!0)},document.addEventListener("DOMContentLoaded",(function(){_(document.body)}))},function(e,t){e.exports=require("electron")},function(e,t,i){}]);